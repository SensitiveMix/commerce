/*! live-0.0.0.js 2016-06-03 */
function ViewPoint_Add (a) { if (!iInfo.IsManager && !iInfo.IsZber) return void iTip('你无权发布讲师观点！'); var b = {}; b.Type = 'CMD_ViewPoint_Add', b.ReceiveRID = iInfo.Live_NG_ID, b.PostUID = iInfo.UserID, b.PostUName = iInfo.UserNickName, b.PostPower = iInfo.Power, b.ReceiveUID = _Config.ToPersonUID, b.ReceiveUName = _Config.ToPersonUName, b.Time = GetSendTime(), b.Msg = a.Msg, b.ViewPointGrade = a.ViewPointGrade, b.MD5 = a.MD5, b.Checked = !0, PostMsg(b) } function GetGradeEN (a) { var b = 'low'; return b = a == 0 ? 'low' : a == 1 ? 'middle' : 'high' } function GetGradeCN (a) { var b = '低'; return b = a == 0 ? '低' : a == 1 ? '中' : '高' } function AddViewPoint (a) { if (!($("tr[t='ViewPoint" + a.MD5 + "']").length > 0)) { var b = new Date(), c = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'], d = 'td-date-' + b.getFullYear() + '-' + (b.getMonth() + 1) + '-' + b.getDate(), e = '<tr id="' + d + '"><td colspan="4" class="td-date"><strong>' + c[b.getDay()] + ', ' + b.getMonth() + '月' + b.getDate() + '</strong></td></tr>'; $('#' + d).length < 1 && $('#ViewPoint_Tbody').prepend(e); var f = '<tr id="ViewPoint' + a.MD5 + '" t="ViewPoint' + a.MD5 + '"><td class="td-time">' + GetSendTime() + '</td><td><span class="td-grade ' + GetGradeEN(a.ViewPointGrade) + '" title="' + GetGradeCN(a.ViewPointGrade) + '">&nbsp;</span></td><td class="td-content"><a href="javascript:void(0)">' + unescape(unescape(a.Msg)) + '</a></td><td><a class="Del" href="javascript:void(0)" onclick="ViewPoint_Del(\'' + a.MD5 + "')\">删除</a></td></tr>"; $(f).insertAfter($('#' + d)), iInfo.IsManager && $('#ViewPoint a.Del').show(), $('.ViewPointBT_N').css({visibility: 'visible'}), $('#ViewPoint_List').mCustomScrollbar('update') } } function ViewPoint_Del (a) { if (!iInfo.IsManager && !iInfo.IsZber) return void iTip('你无权进行删除！'); if ($.isNumeric(a) == 0 && $("tr[t='ViewPoint" + a + "']").length < 1) return void iTip('非法操作！'); if (confirm('是否删除此观点？')) { a = String(a); var b = {}; b.Type = 'CMD_ViewPoint_Del', b.ReceiveRID = iInfo.Live_NG_ID, b.ViewPointID = a, b.MD5 = a, $.get('/Handle/DelViewPoint.asp', {ac: 'DelViewPoint', id: a, rid: iRoomID, t: GetSendTime()}, function () { DelViewPointRe == 1 ? PostMsg(b) : iTip(DelViewPointRe) }, 'script') } } function DelViewPoint (a) { try { $('#ViewPoint' + a.ViewPointID).remove() } catch (b) {} try { $("tr[t='ViewPoint" + a.MD5 + "']").remove() } catch (b) {}$('#ViewPoint_List').mCustomScrollbar('update') } function ShowViewPointZoom () { $('#ViewPoint_Zoom').addClass('on'), setTimeout(function () { $('#ViewPoint_Zoom').removeClass('on') }, 3e3) }$('#ViewPoint_List').mCustomScrollbar({scrollButtons: {enable: !0}}), $('#ViewPoint_Zoom').mouseout(function () { $(this).hasClass('on') && $(this).removeClass('on') }), (iInfo.IsManager || iInfo.IsZber) && ($('#ViewPoint a.Del').show(), $('#ViewPointPub').fancybox({titleShow: !1, autoDimensions: !1, autoScale: !1, height: 295, type: 'iframe'}))
