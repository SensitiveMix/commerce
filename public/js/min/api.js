/*! live-0.0.0.js 2016-06-03 */
function IsLoaded () { _Config.SwfLoaded = !0, _Player = getSWF(_Config.PlayerID), _iFlyMsgPlayer = getSWF('iFlyMsgPlayer'), KeyPressHandler(), EnableUI(), CheckSpeakPower() } function FixMsgInfo (a, b) { setTimeout(function () { switch (a) { case 'UL_Cache':AddUserByJson(b); break; case 'Manager_Cache':CacheManagerByJson(b); break; case 'UL_Enter':EnterRoomByJson(b); break; case 'UL_Leave':DelUserByJson(b); break; case 'MM_Cache':ChangeModeTypeByJson(b); break; case 'MM_Change':ChangeModeTypeByJson(b, !0); break; case 'ML_Status_Change':ChangeMicListStatusByJson(b); break; case 'ML_Status_Cache':ChangeMicListStatusByJson(b); break; case 'ML_Cache':AddMicUserByJson(b); break; case 'ML_Up':AddMicUserByJson(b, !1); break; case 'ML_Down':DelMicUserByJson(b); break; case 'ML_Clear':ClearMicListUI() } }, 10) } function AddUserByJson (JsonStr) { var Json = eval('(' + JsonStr + ')'); SetOnlineUserNum(Json.OnlineNum), Json.Index != 'null' && (GetMoreUL_Index = Json.Index); var user_index = 0; $.each(Json.Data, function (a, b) { b.hasOwnProperty('UserID') && b.hasOwnProperty('UserNickName') && b.hasOwnProperty('LevelID') && b.hasOwnProperty('EnterTime') && (user_index += 1, user_index < 100 && AddUser(b)) }), SetCustomerNum(), DisGetMoreUserList(Json.OnlineNum), IsFirstLoad && ($('#User_List li:first').addClass('t'), $('#User_List li:first .UBase').addClass('on'), $('#User_List li:first .UShowPannel').css({height: _Config.USList_Height, opacity: 1}), IsFirstLoad = !1) } function SetCustomerNum () { var a = $('#Y_User_List  li[CustomerType!="-1"][id!="MoreUserlist"]').length; $('#CustomerNum').html(a) } function DisGetMoreUserList (a) { a > UserListArr.length ? $('#MoreUserlist').css({display: 'inline-block'}) : $('#MoreUserlist').css({display: 'none'}), UpdateScrollbar() } function GetMoreUserList () { var a = {}; a.Type = 'More_UL', a.RoomID = iRoomID, a.Index = GetMoreUL_Index, Fix_PostInfo(a), GetMoreUL_Index += 1 } function SetOnlineUserNum (a) { a == '' || a == null || isNaN(a) || ($('#RoomOnline').text(a + RbNum), _Config.CurrentULNum = a) } function CacheManagerByJson (JsonStr) { var Json = eval('(' + JsonStr + ')') } function EnterRoomByJson (JsonStr) { var Json = eval('(' + JsonStr + ')'); SetOnlineUserNum(Json.OnlineNum), $.each(Json.Data, function (a, b) { if (_Config.CurrentULNum < 100 && (EnterRoom(b), b.IsLogin && b.UserID != iInfo.UserID)) { var c = {}; c.Type = 'Enter_Msg', c.PostUID = b.UserID, c.PostUName = unescape(b.UserNickName), _SysConfig.ShowEnterLeaveMsg == 1 && ReceiveInfo(c) } }), SetCustomerNum(), DisGetMoreUserList(Json.OnlineNum) } function EnterRoom (a) { if (String(iRoomID) == String(a.RoomID) && (a.LevelID = 99999999), $('#User_List').find('#' + a.UserID).length > 0) { var b = $('#User_List').find('#' + a.UserID); return b.attr({roleid: a.RoleID, power: a.Power, levelid: a.LevelID, uname: unescape(a.UserNickName), rid: a.RoomID}), b.find('.UName span').text(unescape(a.UserNickName)), b.find('.US_Pic')[0].src = unescape(unescape(a.FacePic ? a.FacePic : _Config.DefaultFacePic)), b.find('.Role').attr({title: unescape(a.RoleName)}), b.find('.Role')[0].className = 'Role ' + a.RoleCssStyle, void (a.IsManager ? b.find('.RM').hasClass('RoomManager') || b.find('.RM').addClass('RoomManager') : b.find('.RM').removeClass('RoomManager')) } var c = GetUserFromArray(a.UserID); if (c > -1 && UserListArr.splice(c, 1), a.UserID == '') return !1; UserListArr.push(a); var d = $.format(a.IsLogin ? _FormatStr.UserList : _FormatStr.Guest, a.UserID, unescape(unescape(a.UserNickName)), a.LevelClass, a.VIPIcon, a.BestAccount, a.FixIcon, a.LevelID, a.RoomID, unescape(unescape(a.FacePic ? a.FacePic : _Config.DefaultFacePic)), a.Power, a.time, iInfo.Power < 1e3 ? 'none' : '', a.RoleCssStyle, unescape(a.RoleName), a.RoleID, a.IsManager ? 'RoomManager' : '', a.RoomRoleStyle, unescape(a.RoomRoleTitle), a.IsZber ? 'RoomBo' : '', CheckTempCustomer(a.UserID) ? '0' : '-1', CheckUserListMode(a) ? 'list-item' : 'none'); ListAddSort($('#User_List'), a, d) } function ChangeModeTypeByJson (JsonStr, ShowMsg) { ShowMsg = ShowMsg || !1; var Json = eval('(' + JsonStr + ')'); $.each(Json.Data, function (a, b) { if (ChangeModeType(b.V), ShowMsg) { var c = {}; c.Type = 'Sys_Public', c.Msg = '房间发言模式已变更为：' + _Config.ModeTypeDes[parseInt(b.V)] + ' 。', ReceiveInfo(c) } }) } function ChangeMicListStatusByJson (JsonStr) { var Json = eval('(' + JsonStr + ')'); $.each(Json.Data, function (a, b) { b.hasOwnProperty('StopApply') && FlashSetChangeStopApply(b.StopApply), b.hasOwnProperty('MicManage') && FlashSetChangeMicManage(b.MicManage) }) } function DelMicUserByJson (JsonStr) { var Json = eval('(' + JsonStr + ')'); $.each(Json.Data, function (a, b) { try { $('#MicList')[0].removeChild($('#MicList').find('#M' + b.UserID)[0]) } catch (c) {} }) } function ClearMicListUI () { $('#MicList').html('') } function AddMicUserByJson (JsonStr, Is_Ml_Up) { var Json = eval('(' + JsonStr + ')'); Is_Ml_Up != 0 && $.each($('#MicList li'), function (a, b) { if (FindObjectFromJson(b.id.split('M')[1], Json.Data) == 0) try { $('#MicList')[0].removeChild($(b)[0]) } catch (c) {} }), $.each(Json.Data, function (a, b) { AddMicUser(b) }) } function FindObjectFromJson (a, b) { var c = !1; return $.each(b, function (b, d) { d.UserID == a && (c = !0) }), c } function AddUser (a) { String(iRoomID) == String(a.RoomID) && (a.LevelID = 99999999); var b = GetUserFromArray(a.UserID); if (b > -1 && UserListArr.splice(b, 1), a.UserID == '') return !1; UserListArr.push(a); var c = $.format(a.IsLogin ? _FormatStr.UserList : _FormatStr.Guest, a.UserID, unescape(unescape(a.UserNickName)), a.LevelClass, a.VIPIcon, a.BestAccount, a.FixIcon, a.LevelID, a.RoomID, unescape(unescape(a.FacePic ? a.FacePic : _Config.DefaultFacePic)), a.Power, a.time, iInfo.Power < 1e3 ? 'none' : '', a.RoleCssStyle, unescape(a.RoleName), a.RoleID, a.IsManager ? 'RoomManager' : '', a.RoomRoleStyle, unescape(a.RoomRoleTitle), a.IsZber ? 'RoomBo' : '', CheckTempCustomer(a.UserID) ? '0' : '-1', CheckUserListMode(a) ? 'list-item' : 'none'); ListAddSort($('#User_List'), a, c) } function CheckTempCustomer (a) { var b = !1; return $.each(_Crm.TempCustomer.split(','), function (c, d) { d == a && (b = !0) }), b } function CheckUserListMode (a) { var b = !1; return b = UserListMode == 0 ? a.Power >= 1e3 : UserListMode == 2 ? CheckTempCustomer(a.UserID) : !0 } function Fix_PostInfo (a) { _Player._Fix_PostInfo(a) } function Post_MM_Change (a) { if (iInfo.IsManager == 0) return void iTip('您无权修改房间模式！'); var b = {}; b.Type = 'MM_Change', b.RoomID = iRoomID, b.Data = [], b.Data.push({V: a}), Fix_PostInfo(b) } function ApplyMicList () { if (CheckSpeakPower_UI() != 0) { if (iInfo.IsLogin == 0) return void iTip('游客无法上麦发言！'); if (!_Config.Mic_StopApply) { var a = {}; a.Type = 'ML_Up', a.RoomID = iRoomID, Fix_PostInfo(a) } } } function DelMicList (a) { if (a = String(a), iInfo.Power < 1e3 && iInfo.UserID != a) return void iTip('您无权下麦！'); var b = {}; b.Type = 'ML_Down', b.RoomID = iRoomID, b.Data = [], b.Data.push({UID: a}), Fix_PostInfo(b) } function StopApply () { if (iInfo.Power < 1e3) return void iTip('您无权禁麦！'); var a = {}; a.Type = 'ML_Status_Change', a.RoomID = iRoomID, a.Data = [], a.Data.push({StopApply: !_Config.Mic_StopApply}), Fix_PostInfo(a) } function MicManage () { if (iInfo.Power < 1e3) return void iTip('您无权控麦！'); var a = {}; a.Type = 'ML_Status_Change', a.RoomID = iRoomID, a.Data = [], a.Data.push({MicManage: !_Config.Mic_Manage}), Fix_PostInfo(a) } function ClearMicList () { if (iInfo.Power < 1e3) return void iTip('您无权清麦！'); var a = {}; a.Type = 'ML_Clear', a.RoomID = iRoomID, Fix_PostInfo(a) } function AddMicTime () { if (iInfo.Power < 1e3) return void iTip('您无权加时！'); var a = {}; a.Type = 'ML_Status_AddMicTime', a.RoomID = iRoomID, Fix_PostInfo(a) } function CreatPlayer (a) { return a.UserID == iInfo.UserID ? !1 : void _Player._CreatPlayer(a.UserID) } function AddMicUser (a) { if (!($('#M' + a.UserID).length > 0)) { var b = $.format(_FormatStr.MicList, a.UserID, unescape(a.UserNickName), a.LevelClass, a.VIPIcon, a.BestAccount, a.FixIcon, a.LevelID, a.RoomID, unescape(unescape(a.FacePic ? a.FacePic : _Config.DefaultFacePic)), a.Power, a.time); $('#MicList').append(b) } } function ListAddSort (a, b, c) { if (String(iRoomID) == String(b.RoomID) && (b.LevelID = 99999999), a.find('#' + b.UserID).length > 0) { var d = a.find('#' + b.UserID); d.attr({roleid: b.RoleID, power: b.Power, levelid: b.LevelID, uname: unescape(b.UserNickName), rid: b.RoomID}), d.find('.UName span').text(unescape(b.UserNickName)), d.find('.US_Pic')[0].src = unescape(unescape(b.FacePic ? b.FacePic : _Config.DefaultFacePic)), d.find('.Role').attr({title: unescape(b.RoleName)}); try { d.find('.Role')[0].className = 'Role ' + b.RoleCssStyle } catch (e) {} return void (b.IsManager ? d.find('.RM').hasClass('RoomManager') || d.find('.RM').addClass('RoomManager') : d.find('.RM').removeClass('RoomManager')) } var f; Number(a.find('li:first').attr('LevelID')) < Number(b.LevelID) || Number(iRoomID) == Number(b.RoomID) ? a.prepend(c) : Number(a.find('li:last').attr('LevelID')) > Number(b.LevelID) ? a.append(c) : (a.find('li').each(function () { Number($(this).attr('LevelID')) > Number(b.LevelID) && (f = $(this)) }), f ? f.after(c) : a.prepend(c)) } function DelUserUI (a) { try { $('#User_List')[0].removeChild($('#User_List').find('#' + a)[0]) } catch (b) {} try { $('#MicList')[0].removeChild($('#MicList').find('#' + a)[0]) } catch (b) {} } function DelUserByJson (JsonStr) { var Json = eval('(' + JsonStr + ')'); SetOnlineUserNum(Json.OnlineNum), $.each(Json.Data, function (a, b) { DelUserByUID(String(b.UserID)) }), DisGetMoreUserList(Json.OnlineNum), SetCustomerNum() } function DelUserByUID (a) { if (a != iInfo.UserID) { DelUserUI(a); var b = GetUserFromArray(a); b > -1 && UserListArr.splice(b, 1) } } function CheckUserFromArray (a) { var b = !1; return $.each(UserListArr, function (c, d) { String(d.UserID) == String(a) && (b = !0) }), b } function GetUserFromArray (a) { var b; return $.each(UserListArr, function (c, d) { String(d.UserID) == String(a) && (b = Number(c)) }), b } function SetMenuCurrent (a) { _Config.MenuCurrentUID = a.UID, _Config.MenuCurrentUname = a.Uname, _Config.MenuCurrentPower = a.Power, _Config.MenuCurrentRoleStyle = a.RoleStyle, _Config.MenuCurrentRoleTitle = a.RoleTitle, _Config.MenuCurrentZberStyle = a.ZberStyle, _Config.MenuCurrentRoomRoleStyle = a.RoomRoleStyle, _Config.MenuCurrentRoomRoleTitle = a.RoomRoleTitle, _Config.MenuCurrentUPic = a.UPic } function Manage_Kick () { $.get('/handle/CheckPowerKey.asp', {ac: 'CheckPowerKey', uid: _Config.MenuCurrentUID, key: '5999af91220494dd529ab97c5ffaead5', rid: iRoomID, t: GetSendTime()}, function () { if (CheckPowerKey == 1) { if (!iInfo.IsManager) return void iTip('您不是该房间管理员,无权限进行操作！'); if (_Config.MenuCurrentPower >= 1999 || _Config.MenuCurrentUID == 0) return iTip('无权限！'), !1; var a = {}; a.Type = 'Manage_Kick', a.ReceiveRID = iInfo.Live_NG_ID, a.PostUID = iInfo.UserID, a.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), a.ReceiveUID = _Config.MenuCurrentUID, a.ReceiveUName = GB2312UnicodeConverter.ToUnicode(_Config.MenuCurrentUname), a.Time = GetSendTime(), PostMsg(a), _Player._DelUser(_Config.MenuCurrentUID) } else iTip(CheckPowerKey) }, 'script'), $('#Y_ManageMenu').hide() } function Manage_BlackKick () { $.get('/handle/CheckPowerKey.asp', {ac: 'CheckPowerKey', uid: _Config.MenuCurrentUID, key: '5999af91220494dd529ab97c5ffaead5', rid: iRoomID, t: GetSendTime()}, function () { if (CheckPowerKey == 1) { if (!iInfo.IsManager) return void iTip('您不是该房间管理员,无权限进行操作！'); if (_Config.MenuCurrentPower >= 1999) return iTip('无权限！'), !1; var a = {}; a.Type = 'Manage_BlackKick', a.ReceiveRID = iInfo.Live_NG_ID, a.PostUID = iInfo.UserID, a.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), a.ReceiveUID = _Config.MenuCurrentUID, a.ReceiveUName = GB2312UnicodeConverter.ToUnicode(_Config.MenuCurrentUname), a.Time = GetSendTime(), PostMsg(a), $.get('/handle/SetBlackKick.asp', {ac: 'SetBlackKick_Manage', rid: iRoomID, uid: a.ReceiveUID, t: GetSendTime()}, function () {}), _Player._DelUser(_Config.MenuCurrentUID) } else iTip(CheckPowerKey) }, 'script'), $('#Y_ManageMenu').hide() } function Manage_Silent () { $.get('/handle/CheckPowerKey.asp', {ac: 'CheckPowerKey', uid: _Config.MenuCurrentUID, key: 'f72e4e023d13d518d3c4f2db31117b2d', rid: iRoomID, t: GetSendTime()}, function () { if (CheckPowerKey == 1) { if (!iInfo.IsManager) return void iTip('您不是该房间管理员,无权限进行操作！'); if (_Config.MenuCurrentPower >= 1999 || _Config.MenuCurrentUID == 0) return iTip('无权限！'), !1; var a = {}; a.Type = 'Manage_Silent', a.ReceiveRID = iInfo.Live_NG_ID, a.PostUID = iInfo.UserID, a.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), a.ReceiveUID = _Config.MenuCurrentUID, a.ReceiveUName = GB2312UnicodeConverter.ToUnicode(_Config.MenuCurrentUname), a.Time = GetSendTime(), PostMsg(a) } else iTip(CheckPowerKey) }, 'script'), $('#Y_ManageMenu').hide() } function Manage_UnSilent () { if (!iInfo.IsManager) return void iTip('您不是该房间管理员,无权限进行操作！'); if (_Config.MenuCurrentPower >= 1999 || _Config.MenuCurrentUID == 0) return iTip('无权限！'), !1; var a = {}; a.Type = 'Manage_UnSilent', a.ReceiveRID = iInfo.Live_NG_ID, a.PostUID = iInfo.UserID, a.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), a.ReceiveUID = _Config.MenuCurrentUID, a.ReceiveUName = GB2312UnicodeConverter.ToUnicode(_Config.MenuCurrentUname), a.Time = GetSendTime(), PostMsg(a), $('#Y_ManageMenu').hide() } function Manage_Manager () { return iInfo.IsManager ? iInfo.Power < 1999 ? void iTip('您不是该房间超管,无权限进行操作！') : _Config.MenuCurrentPower >= 1999 || _Config.MenuCurrentUID == 0 ? (iTip('无权限！'), !1) : ($('#Y_ManageMenu').hide(), void $.get('/handle/SetManager.asp', {ac: 'SetManager', uid: _Config.MenuCurrentUID, rid: iRoomID, t: GetSendTime()}, function () { if (Manager != 1) return void iTip('权限不足！'); var a = {}; a.Type = 'Manage_Manager', a.ReceiveRID = iInfo.Live_NG_ID, a.PostUID = iInfo.UserID, a.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), a.ReceiveUID = _Config.MenuCurrentUID, a.ReceiveUName = GB2312UnicodeConverter.ToUnicode(_Config.MenuCurrentUname), a.Time = GetSendTime(), PostMsg(a) }, 'script')) : void iTip('您不是该房间超管,无权限进行操作！') } function Manage_UnManager () { return iInfo.IsManager ? iInfo.Power < 1999 ? void iTip('您不是该房间超管,无权限进行操作！') : _Config.MenuCurrentPower >= 1999 || _Config.MenuCurrentUID == 0 ? (iTip('无权限！'), !1) : ($('#Y_ManageMenu').hide(), void $.get('/handle/UnManager.asp', {ac: 'UnManager', uid: _Config.MenuCurrentUID, rid: iRoomID, t: GetSendTime()}, function () { if (Manager != 1) return void iTip('权限不足！'); var a = {}; a.Type = 'Manage_UnManager', a.ReceiveRID = iInfo.Live_NG_ID, a.PostUID = iInfo.UserID, a.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), a.ReceiveUID = _Config.MenuCurrentUID, a.ReceiveUName = GB2312UnicodeConverter.ToUnicode(_Config.MenuCurrentUname), a.Time = GetSendTime(), PostMsg(a) }, 'script')) : void iTip('您不是该房间超管,无权限进行操作！') } function Manage_SetRoomUserRole (a) { return iInfo.IsManager ? _Config.MenuCurrentPower >= 1999 || _Config.MenuCurrentUID == 0 ? (iTip('无权限！'), !1) : ($('#Y_ManageMenu').hide(), void $.get('/handle/SetRoomRole.asp', {ac: 'SetRoomRole', uid: _Config.MenuCurrentUID, rid: iRoomID, roleid: a, t: GetSendTime()}, function () { if (SetRoomRole != 1) return void iTip('权限不足！'); $('#' + _Config.MenuCurrentUID + ' .RoomUserRole').attr('className', 'RoomUserRole ' + RoomUserRoleCache[a].style), $('#' + _Config.MenuCurrentUID + ' .RoomUserRole').attr({title: RoomUserRoleCache[a].title}); var b = {}; b.Type = 'Manage_SetRoomUserRole', b.ReceiveRID = iInfo.Live_NG_ID, b.PostUID = iInfo.UserID, b.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), b.ReceiveUID = _Config.MenuCurrentUID, b.ReceiveUName = GB2312UnicodeConverter.ToUnicode(_Config.MenuCurrentUname), b.RoleID = a, b.Time = GetSendTime(), PostMsg(b) }, 'script')) : void iTip('您不是该房间管理员,无权限进行操作！') } function SetRoomUserRole (a) { $('#' + a.ReceiveUID + ' .RM').removeClass('RoomManager'), $('#' + a.ReceiveUID + ' .RoomUserRole')[0].className = 'RoomUserRole ' + RoomUserRoleCache[a.RoleID].style, $('#' + a.ReceiveUID + ' .RoomUserRole').attr({title: RoomUserRoleCache[a.RoleID].title}), a.ReceiveUID == iInfo.UserID && (iInfo.RoomRolePowerKeys = RoomUserRoleCache[a.RoleID].keys, iInfo.RoomRoleStyle = RoomUserRoleCache[a.RoleID].style, iInfo.RoomRoleTitle = RoomUserRoleCache[a.RoleID].title, iTip('您的角色已被更改，' + RoomUserRoleCache[a.RoleID].title)), CheckSpeakPower() } function Menu_Black (a, b) { if (_Config.BlackList.hasOwnProperty(a)) { delete _Config.BlackList[a]; var c = {}; c.Type = 'Menu_UnBlack', c.ReceiveUName = b, c.Time = GetSendTime(), ReceiveInfo(c) } else { _Config.BlackList[a] = b; var c = {}; c.Type = 'Menu_Black', c.ReceiveUName = b, c.Time = GetSendTime(), ReceiveInfo(c) } } function InBlackList (a) { return !!_Config.BlackList.hasOwnProperty(a) } function Attention (a) { var b = $(a).parent().parent().parent(), c = parseInt(b[0].id), d = parseInt(b.attr('power')); return d == 0 ? (iTip('无法关注游客！'), !1) : c == 0 ? !1 : iInfo.UserID == c ? (iTip('无法关注自己！'), !1) : void $.get('/handle/Attention.asp', {ac: 'Attention', guid: c, t: GetSendTime()}, function () { AttentionRe == 1 ? $(a).addClass('US_List_Heart_On') : $(a).addClass('US_List_Heart_On') }, 'script') } function AddFriend (a) { if (_SysConfig.OpenFriend == 0) return iTip('好友功能已关闭！'), !1; var b = $(a).parent().parent().parent(), c = parseInt(b[0].id), d = parseInt(b.attr('power')); return d == 0 ? (iTip('无法关注游客！'), !1) : c == 0 ? !1 : iInfo.UserID == c ? (iTip('无法添加自己为好友！'), !1) : void $.get('/handle/AddFriend.asp', {ac: 'AddFriend', guid: c, t: GetSendTime()}, function () { AddFriend == 1 ? iTip('发送好友申请成功！') : iTip('不能重复发送好友申请！') }, 'script') } function FeedRoom (a) { $.get('/handle/Feed.asp', {ac: 'FeedRoom', rid: iRoomID, t: GetSendTime()}, function () { FeedRe == 1 ? $(a).text('已订阅') : FeedRe == 0 && $(a).text('订阅') }, 'script') } function Sale_GetQQ () { return iInfo.IsManager != 1 ? void iTip('您不是该房间管理员,无权限进行操作！') : _Config.MenuCurrentUID == 0 ? (iTip('无权限！'), !1) : (Post_GetQQ(_Config.MenuCurrentUID), void $('#Y_ManageMenu').hide()) } function Sale_AddTempCustomer () { if (iInfo.IsManager != 1 && iInfo.UserType == 1) return void iTip('您无权限进行操作！'); if (_Config.MenuCurrentUID == 0) return iTip('无权限！'), !1; var a = _Config.MenuCurrentUID; $.each(CustomerListArr, function (b) { return CustomerListArr[b] == a ? void iTip('该用户已经是您的客户！') : void 0 }), $.get('/handle/SetTempCustomer.asp', {ac: 'AddTempCustomer', guid: a, t: GetSendTime()}, function () { if (TempCustomerRe == 1) { CustomerListArr.push(a); try { $('#User_List #' + a).attr('CustomerType', '0') } catch (b) {}SetCustomerNum(), iTip('添加成功！') } else iTip(TempCustomerRe) }, 'script'), $('#Y_ManageMenu').hide() } function Send_PrivateApply () { if (iInfo.IsManager != 1 && iInfo.UserType == 1) return void iTip('您无权限进行操作！'); if (_Config.MenuCurrentUID == 0) return iTip('无法向游客发送专属申请！'), !1; var a = _Config.MenuCurrentUID; _Config.MenuCurrentUname; $.get('/handle/SendPrivateApply.asp', {ac: 'SendPrivateApply', guid: a, t: GetSendTime()}, function () { if (SendPrivateApplyRe == 1) { iTip('专属申请发送成功！'); var b = {}; b.Type = 'CMD_PrivateApply', b.ReceiveRID = iRoomID, b.ReceiveUID = a, b.PostUID = iInfo.UserID, b.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), PostMsg(b) } else iTip(SendPrivateApplyRe) }, 'script') } function CheckSpeakPower () { if (iInfo.IsManager == 0) if (CheckPowerKeys(iInfo.RoomRolePowerKeys, '2ddf62e5f67685092d02eb4829274776')) { try { _Player._LoadMic() } catch (a) {}_Config.SpeakPower = !0 } else { try { _Player._UnLoadMic() } catch (a) {}_Config.SpeakPower = !1 } } function CheckSpeakPower_UI () { return iInfo.IsManager != 0 || CheckPowerKeys(iInfo.RoomRolePowerKeys, '2ddf62e5f67685092d02eb4829274776') ? !0 : (iTip('您没有语音权限！'), !1) } function SetMicMuted () { try { _Player._SetMicMuted() } catch (a) {} } function FlashSet_MicIsOpen (a) { _MicIsOpen = a, _Config.TalkType == 2 && _MicIsOpen && LivePublish() } function FlashSetTalkType (a) { var b = $('#Y_Global_Speak_Model'); _Config.TalkType = a, a == 1 ? (b.attr({t: '1'}), b.text('按F2说话')) : a == 2 && (b.attr({t: '2'}), b.text('自由发言')) } function ChangeTalkType (a) { _Config.TalkType = a; try { _Player._SetMicConfig('Config_Mic_TalkType', _Config.TalkType) } catch (b) {} } function FlashSetMicConfig (a) { FlashSetSoundVolume(a.Config_Sound_Volume), FlashSetMicVolume(a.Config_Mic_Volume), FlashSetTalkType(a.Config_Mic_TalkType) } function FlashSetSoundVolume (a) { $('#GlobalUsVolume').slider('value', a); var b = $('#Y_Global_Sound_Volume span'); a == 0 ? b.addClass('GlobalSilent') : b.removeClass('GlobalSilent'), b.attr({oldvolume: _Config.USVolume}) } function FlashSetMicVolume (a) { $('#GlobalUsMic').slider('value', a); var b = $('#Y_Global_Mic_Volume span'); a == 0 ? b.addClass('GlobalSilent') : b.removeClass('GlobalSilent'), b.attr({oldvolume: _Config.MicGain}) } function SetSoundVolume (a) { try { _Player._SetMicConfig('Config_Sound_Volume', a) } catch (b) {} } function SetMicVolume (a) { try { _Player._SetMicConfig('Config_Mic_Volume', a) } catch (b) {} } function OpenMic () { if ($('#Y_MicPlayer_Div').hasClass('Y_MicPlayer_DivV2') ? $('#Y_MicPlayer_Div').removeClass('Y_MicPlayer_DivV2') : $('#Y_MicPlayer_Div').addClass('Y_MicPlayer_DivV2'), !_MicIsOpen) try { _Player._OpenMic() } catch (a) {} } function FlashSetMicShowTime (a) { iInfo.MicShowTime = a, a > 0 && MicTime(null, a), LivePublish() } function FlashSetIsPublishing (a) { iInfo.IsPublishing = a } function UserisManager () { return iInfo.Power > 999 } function KeyPressHandler () { $(document).keydown(function (a) { if (a.which == 113) { if (_Config.TalkType != 1) return !1; if (_Config.KeyDown) return !1; _Config.KeyDown = !0; try { _Player._F2_OnKeyDown() } catch (b) {} } }).keyup(function (a) { if (a.which == 113) { if (_Config.TalkType != 1) return !1; _Config.KeyDown = !1; try { _Player._F2_OnKeyUp() } catch (b) {} } }) } function onCuePoint (a, b, c) { SoundActivity(a, b), MicTime(a, c) } function MicTime (a, b) { if (void 0 != b) { clearTimeout(MicTimeSetTimeOut); var b = b > 0 ? b : iInfo.MicShowTime; $('#MicListHaveTime').text(b + 's').css({display: b > 0 ? 'inline-block' : 'none'}), MicTimeSetTimeOut = setTimeout(function () { $('#MicListHaveTime').css({display: 'none'}) }, 1500) } } function FLashSetMicActivity (a) { $('#Y_Mic_Activity_Display').css({width: a + '%'}), SoundActivity(iInfo.UserID, a) } function SoundActivity (a, b) { clearTimeout(MicActivityTime); try { b > 3 ? ($('#' + a + ' img:eq(0)').hasClass('On') == 0 && $('#' + a + ' img:eq(0)').addClass('On'), $('#M' + a + ' img:eq(0)').hasClass('On') == 0 && $('#M' + a + ' img:eq(0)').addClass('On')) : ($('#' + a + ' img:eq(0)').hasClass('On') && $('#' + a + ' img:eq(0)').removeClass('On'), $('#M' + a + ' img:eq(0)').hasClass('On') && $('#M' + a + ' img:eq(0)').removeClass('On')) } catch (c) {}MicActivityTime = setTimeout(function () { try { $('#' + a + ' img:eq(0)').removeClass('On'), $('#M' + a + ' img:eq(0)').removeClass('On') } catch (b) {} }, 1500) } function silent (u, v) { eval('_Player._ChangeVolume_' + u + '(' + v + ')') } function ChangeModeType (a) { a = parseInt(a), _Config.ModeType = a; var b = $('#ModelButtonList_' + a + ' a'); $('#ModelButton .Button').text(b.text()), String(a) == '3' ? ($('#Y_List').height($('.Y_Left').height() - 54 - 43 - $('#Y_Left_Models').height() - 160), $('#Y_List>div').height($('.Y_Left').height() - 54 - 43 - $('#Y_Left_Models').height() - 2), $('#Y_User_List').mCustomScrollbar('update'), $('#Y_Friend_List').mCustomScrollbar('update'), $('#Y_MicShowList').show()) : ($('#Y_List').height($('.Y_Left').height() - 54 - 43 - $('#Y_Left_Models').height() - 2), $('#Y_List>div').height($('.Y_Left').height() - 54 - 43 - $('#Y_Left_Models').height() - 2), $('#Y_User_List').mCustomScrollbar('update'), $('#Y_Friend_List').mCustomScrollbar('update'), $('#Y_MicShowList').hide()) } function ChangeModeType_SetSO (a) { try { _Player._ChangeModeType(a) } catch (b) {} } function FlashSetChangeStopApply (a) { a = Boolean(a), a ? ($('#Mic_Apply').addClass('disEnable'), $('#Mic_StopApply').text('开麦')) : ($('#Mic_Apply').removeClass('disEnable'), $('#Mic_StopApply').text('禁麦')), _Config.Mic_StopApply = a } function FlashSetChangeMicManage (a) { a = Boolean(a), a ? ($('#Mic_Status').addClass('MicStop'), $('#Mic_Manage').text('放麦')) : ($('#Mic_Status').removeClass('MicStop'), $('#Mic_Manage').text('控麦')), _Config.Mic_Manage = a } function ChangeModeType_PostInfo (a) { var b = {}; b.type = 'Msg_ChangeModeType', b.ReceiveRID = iInfo.Live_NG_ID, b.ModeType = a, PostMsg(b) } function ReplaceMsgToFace (a) { for (var b = a, c = 0; c < a.split('/').length; c++)$.each(_FormatStr.FaceArry, function (a, c) { b.indexOf('/' + c) > -1 && (b = b.replace('/' + c, $.format(FaceTemplateStr, a))) }); return b } function ReplaceUploadPic (a) { for (var b = a, c = /\[img=([^\]\[]*)\]/gi, d = '', e = iInfo.Power < 1e3 ? 'none' : ''; d = c.exec(b);)b = b.replace(d[0], $.format(_FormatStr.MsgSharePic, d[1], e)); return b } function MsgPic_LargeZoom (a) { $(a).parent().find('.LargeZoom').click() } function Init_MsgSharePic () { $('a.LargeZoom').fancybox({titleShow: !1}) } function AddSharePic (a) { var b = $.format(_FormatStr.MsgShareListPic, a.PostUName, a.PicUrl, a.Time, a.SharePicID); $('.Y_SharePic .piclist').prepend(b), InitSharePic() } function DelSharePic (a) { try { $('#SharePic' + a.SharePicID).remove() } catch (b) {} } function Set_SharePic (a) { if (!(iInfo.Power < 1e3)) { var b = {}; b.Type = 'CMD_SharePic_Add', b.ReceiveRID = iInfo.Live_NG_ID, b.PostUID = iInfo.UserID, b.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), b.Time = GetSendTime(), b.PicUrl = $(a).attr('t'), $.get('/handle/SetSharePic.asp', {ac: 'SetSharePic', pic: b.PicUrl, rid: iRoomID, t: GetSendTime()}, function () { SharePicRe && (b.SharePicID = SharePicID, PostMsg(b)) }, 'script') } } function SetCurrentLiveUID (a) { _Config.CurrentLiveUID = a.UID, _Config.CurrentLiveUName = a.NickName, LiveMessage_getrecord(1) } function LivePublish () { switch (_Config.ModeType) { case 1:break; case 2:if (iInfo.Power < 1e3) return void StopPublish(); break; case 3:if (iInfo.Power < 1e3 && iInfo.MicShowTime < 1) return void StopPublish() } if (_MicIsOpen) { if (!iInfo.IsPublishing) { try { _Player._LivePublish() } catch (a) {}iInfo.IsPublishing = !0 } } else { $('#Y_MicPlayer_Div').hasClass('Y_MicPlayer_DivV2') ? '' : $('#Y_MicPlayer_Div').addClass('Y_MicPlayer_DivV2'); try { _Player._OpenMic() } catch (a) {} } } function StopPublish () { if (_Config.TalkType != 2 || UserisManager() != 1) { try { _Player._StopPublish() } catch (a) {}iInfo.IsPublishing = !1 } } function SetToPerson (a) { a.uid == 0 && (_Config.PrivateChecked = !1), _Config.ToPersonUID = a.uid, _Config.ToPersonUName = a.uname, _Config.ToPersonPower = a.power, _Config.ToPersonRoleStyle = a.RoleStyle, _Config.ToPersonRoleTitle = a.RoleTitle, _Config.ToPersonZberStyle = a.ZberStyle, _Config.ToPersonRoomRoleStyle = a.RoomRoleStyle, _Config.ToPersonRoomRoleTitle = a.RoomRoleTitle } function SetPrivatePopToPerson (a) { _Config.PrivatePop_ToPersonUID = a.uid, _Config.PrivatePop_ToPersonUName = a.uname, _Config.PrivatePop_ToPersonPower = a.power, _Config.PrivatePop_ToPersonRoleStyle = a.RoleStyle, _Config.PrivatePop_ToPersonRoleTitle = a.RoleTitle, _Config.PrivatePop_ToPersonZberStyle = a.ZberStyle, _Config.PrivatePop_ToPersonRoomRoleStyle = a.RoomRoleStyle, _Config.PrivatePop_ToPersonRoomRoleTitle = a.RoomRoleTitle } function CheckMsgLength (a) { return a.Msg.length > _Config.MsgMaxNum ? !0 : void 0 } function AutoPostMsg (a) { return $.cookie('Silent_' + iRoomID) && (new Date()).format('yyyy-MM-dd hh:mm:ss').localeCompare($.cookie('Silent_' + iRoomID)) == -1 ? (iTip('您被' + iRoomID + '房间管理员禁言到' + $.cookie('Silent_' + iRoomID)), !1) : ($('#Y_iSend_Private').hasClass('PrivateMsgChecked') ? PostMsg_Private(a) : PostMsg_Public(a), !1) } function PostMsg_Public (e) { if (_SysConfig.CheckMsg == 1) { var o = {}; if (o.Type = 'Msg_Public', o.ReceiveRID = iInfo.Live_NG_ID, o.PostUID = iInfo.UserID, o.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), o.PostPower = iInfo.Power, o.ReceiveUID = _Config.ToPersonUID, o.ReceiveUName = _Config.ToPersonUName, o.ReceivePower = _Config.ToPersonPower, o.RoleStyle = iInfo.RoleCssStyle, o.ZberStyle = iInfo.IsZber ? 'RoomBo' : '', o.RoomRoleStyle = iInfo.RoomRoleStyle, o.RoomRoleTitle = GB2312UnicodeConverter.ToUnicode(iInfo.RoomRoleTitle), o.Receive_RoleStyle = _Config.ToPersonRoleStyle, o.Receive_ZberStyle = _Config.ToPersonZberStyle, o.Receive_RoomRoleStyle = _Config.ToPersonRoomRoleStyle, o.Receive_RoomRoleTitle = GB2312UnicodeConverter.ToUnicode(_Config.ToPersonRoomRoleTitle), o.PostRoleTitle = iInfo.RoleName, o.ReceiveRoleTitle = _Config.ToPersonRoleTitle, o.MID = guidGenerator(), o.isSelf = !1, o.Time = GetSendTime(), o.Msg = $(e).val().split('@').join(''), o.MD5 = '', o.Checked = !!iInfo.IsManager, $(e).val(''), $(e).focus(), CheckMsgLength(o)) return void iTip('消息字数最多' + _Config.MsgMaxNum + '个。'); if (_SysConfig.SaveMsg == 1 ? iInfo.IsLogin == 0 && _SysConfig.SaveGuestMsg == 0 ? (o.MD5 = hex_md5(getDataTimes()), PostMsg(o)) : $.get('/Handle/AddChatMsg.asp', {ac: 'AddChatMsg', Type: 0, Roomid: iRoomID, UID: o.PostUID, UName: o.PostUName, GUID: o.ReceiveUID ? o.ReceiveUID : 0, GUName: o.ReceiveUName, ChatMsg: o.Msg, t: getDataTimes()}, function (json) { var dataObj = eval('(' + json + ')'); $.each(dataObj.data, function (a, b) { o.MD5 = b.MD5, PostMsg(o) }) }, 'script') : (o.MD5 = guidGenerator(), PostMsg(o)), _SysConfig.ShowMyMsg == 1 && iInfo.IsManager == 0) { var c = {}; c = $.extend(!0, {}, o), c.isSelf = !0, ReceiveInfo(c) } } else { var o = {}; if (o.Type = 'Msg_Public', o.ReceiveRID = iInfo.Live_NG_ID, o.PostUID = iInfo.UserID, o.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), o.PostPower = iInfo.Power, o.ReceiveUID = _Config.ToPersonUID, o.ReceiveUName = _Config.ToPersonUName, o.ReceivePower = _Config.ToPersonPower, o.RoleStyle = iInfo.RoleCssStyle, o.ZberStyle = iInfo.IsZber ? 'RoomBo' : '', o.RoomRoleStyle = iInfo.RoomRoleStyle, o.RoomRoleTitle = GB2312UnicodeConverter.ToUnicode(iInfo.RoomRoleTitle), o.Receive_RoleStyle = _Config.ToPersonRoleStyle, o.Receive_ZberStyle = _Config.ToPersonZberStyle, o.Receive_RoomRoleStyle = _Config.ToPersonRoomRoleStyle, o.Receive_RoomRoleTitle = GB2312UnicodeConverter.ToUnicode(_Config.ToPersonRoomRoleTitle), o.PostRoleTitle = iInfo.RoleName, o.ReceiveRoleTitle = _Config.ToPersonRoleTitle, o.Time = GetSendTime(), o.Msg = $(e).val().split('@').join(''), o.MD5 = '', o.Checked = !0, $(e).val(''), $(e).focus(), CheckMsgLength(o)) return void iTip('消息字数最多' + _Config.MsgMaxNum + '个。'); if (PostMsg(o), _SysConfig.SaveMsg == 1) { if (iInfo.IsLogin == 0 && _SysConfig.SaveGuestMsg == 0) return; $.get('/Handle/AddChatMsg.asp', {ac: 'AddChatMsg', Type: 0, Roomid: iRoomID, UID: o.PostUID, UName: o.PostUName, GUID: o.ReceiveUID ? o.ReceiveUID : 0, GUName: o.ReceiveUName, ChatMsg: o.Msg, t: getDataTimes()}, function () {}, 'script') } } } function PostMsg_Private (a) { var b = {}; return b.Type = 'Msg_Private', b.ReceiveRID = iRoomID, b.PostUID = iInfo.UserID, b.PostUName = GB2312UnicodeConverter.ToUnicode(iInfo.UserNickName), b.PostPower = iInfo.Power, b.ReceiveUID = _Config.ToPersonUID, b.ReceiveUName = _Config.ToPersonUName, b.ReceivePower = _Config.ToPersonPower, b.RoleStyle = iInfo.RoleCssStyle, b.ZberStyle = iInfo.IsZber ? 'RoomBo' : '', b.RoomRoleStyle = iInfo.RoomRoleStyle, b.RoomRoleTitle = GB2312UnicodeConverter.ToUnicode(iInfo.RoomRoleTitle), b.Receive_RoleStyle = _Config.ToPersonRoleStyle, b.Receive_ZberStyle = _Config.ToPersonZberStyle, b.Receive_RoomRoleStyle = _Config.ToPersonRoomRoleStyle, b.Receive_RoomRoleTitle = GB2312UnicodeConverter.ToUnicode(_Config.ToPersonRoomRoleTitle), b.Time = GetSendTime(), b.Msg = $(a).val().split('@').join(''), $(a).val(''), $(a).focus(), CheckMsgLength(b) ? void iTip('消息字数最多' + _Config.MsgMaxNum + '个。') : (PostMsg(b), void $.get('/Handle/AddChatMsg.asp', {ac: 'AddChatMsg', Type: 1, Roomid: iRoomID, UID: b.PostUID, UName: b.PostUName, GUID: b.ReceiveUID, GUName: b.ReceiveUName, ChatMsg: b.Msg, t: getDataTimes()}, function () {}, 'script')) } function PostMsg (a) { Is_WS == 1 ? WS_PostInfo(a) : _Player._PostInfo(a) } function ReceiveInfo (a) {
  setTimeout(function () {
    var b = {}; b = $.extend(!0, {}, a); var c, d, e, f, g, h; switch (a.Type) {
      case 'Msg_Public':if (InBlackList(a.PostUID)) return; if (c = a.ReceiveUID == 0 ? _FormatStr.PublicMsg : _FormatStr.PublicMsg_ToPerson, _SysConfig.CheckMsg == 1) if (a.Checked == 0) { if (iInfo.IsManager)c = a.ReceiveUID == 0 ? _FormatStr.PublicMsg_Check : _FormatStr.PublicMsg_ToPerson_Check, _CheckMsgList[b.MD5] = b; else if (a.isSelf != 1) return } else if (iInfo.IsManager && a.IsDBMsg == 0) return void (a.MD5 != '' && $('#' + a.MD5).hide()); if (typeof a.MID !== 'undefined' && $("#Y_PubMes_Div ul li[MID='" + a.MID + "']").length > 0) return; a.MD5 != '' && $('#M_' + a.MD5).length > 0, a.Msg = GB2312UnicodeConverter.ToGB2312(unescape(unescape(a.Msg))), a.Msg = ReplaceKeys(a.Msg), a.Msg = ReplaceMsgToFace(a.Msg), a.Msg = ReplaceUploadPic(a.Msg), a.PostUID = ReplaceKeys_UID(a.PostUID), g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, a.PostUID, GB2312UnicodeConverter.ToGB2312(unescape(a.PostUName)), a.ReceiveUID, GB2312UnicodeConverter.ToGB2312(unescape(unescape(a.ReceiveUName))), a.Msg, a.Time, a.MD5, a.Checked, a.PostPower, a.ReceivePower, a.RoleStyle, a.ZberStyle, a.RoomRoleStyle, unescape(unescape(a.RoomRoleTitle)), a.Receive_RoleStyle, a.Receive_ZberStyle, a.Receive_RoomRoleStyle, unescape(a.Receive_RoomRoleTitle), a.PostPower >= 1e3 ? 'RoomManager' : '', a.ReceivePower >= 1e3 ? 'RoomManager' : '', a.MID, unescape(unescape(a.PostRoleTitle)), unescape(unescape(a.ReceiveRoleTitle))); break; case 'Msg_Private':if (InBlackList(a.PostUID)) return; if (iInfo.UserID != a.PostUID && iInfo.UserID != a.ReceiveUID) return; c = _FormatStr.PrivateMsg_ToPerson, a.Msg = unescape(a.Msg), a.Msg = ReplaceKeys(a.Msg), a.Msg = ReplaceMsgToFace(a.Msg), a.Msg = ReplaceUploadPic(a.Msg), a.PostUID = ReplaceKeys_UID(a.PostUID), g = 10, h = _Config.Pri_isScroll, d = '#Y_PriMes_Div', f = $.format(c, a.PostUID, unescape(a.PostUName), a.ReceiveUID, unescape(a.ReceiveUName), a.Msg, a.Time, a.PostPower, a.ReceivePower, '', '', a.RoleStyle, a.ZberStyle, a.RoomRoleStyle, unescape(a.RoomRoleTitle), a.Receive_RoleStyle, a.Receive_ZberStyle, a.Receive_RoomRoleStyle, unescape(a.Receive_RoomRoleTitle), a.PostPower >= 1e3 ? 'RoomManager' : '', a.ReceivePower >= 1e3 ? 'RoomManager' : ''); break; case 'Msg_Private_Pop':if (InBlackList(a.PostUID)) return !1; if (iInfo.UserID != a.PostUID && iInfo.UserID != a.ReceiveUID) return !1; if (iInfo.UserID == a.PostUID && typeof a.isSelf !== 'undefined' && a.isSelf != 1) return !1; iInfo.UserID == a.ReceiveUID && Sale_PrivatePop_Add_ByObj(a), c = _FormatStr.PublicMsg, a.Msg = unescape(unescape(a.Msg)), a.Msg = ReplaceKeys(a.Msg), a.Msg = ReplaceMsgToFace(a.Msg), a.Msg = ReplaceUploadPic(a.Msg), a.PostUID = ReplaceKeys_UID(a.PostUID), g = 100, h = !0, d = '#PrivatePop_MsgList_' + (iInfo.UserID == a.PostUID ? a.ReceiveUID : a.PostUID), f = $.format(c, a.PostUID, GB2312UnicodeConverter.ToGB2312(unescape(a.PostUName)), a.ReceiveUID, GB2312UnicodeConverter.ToGB2312(unescape(unescape(a.ReceiveUName))), a.Msg, a.Time, a.MD5, a.Checked, a.PostPower, a.ReceivePower, a.RoleStyle, a.ZberStyle, a.RoomRoleStyle, unescape(unescape(a.RoomRoleTitle)), a.Receive_RoleStyle, a.Receive_ZberStyle, a.Receive_RoomRoleStyle, unescape(a.Receive_RoomRoleTitle), a.PostPower >= 1e3 ? 'RoomManager' : '', a.ReceivePower >= 1e3 ? 'RoomManager' : '', a.MID, unescape(unescape(a.PostRoleTitle)), unescape(unescape(a.ReceiveRoleTitle)))
        break; case 'Sys_Public':c = _FormatStr.SysMsg, a.Msg = unescape(a.Msg), a.Msg = ReplaceMsgToFace(a.Msg), a.Msg = ReplaceUploadPic(a.Msg), g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, a.Msg, GetSendTime()); break; case 'Sys_Private':c = _FormatStr.SysMsg, a.Msg = unescape(a.Msg), a.Msg = ReplaceMsgToFace(a.Msg), a.Msg = ReplaceUploadPic(a.Msg), g = 10, h = _Config.Pri_isScroll, d = '#Y_PriMes_Div', f = $.format(c, a.Msg, GetSendTime()); break; case 'Enter_Msg':c = _FormatStr.EnterMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', a.PostUID = ReplaceKeys_UID(a.PostUID), f = $.format(c, a.PostUID, unescape(a.PostUName), GetSendTime()); break; case 'Fly_Msg':PlySwf.show(), a.Msg = unescape(a.Msg); for (var i = 0; i < a.Msg.length; i++)a.Msg = ReplaceKeys(removeHTMLTag(a.Msg)); return void _iFlyMsgPlayer.jsExec(unescape(unescape(a.PostUName)) + '：' + unescape(unescape(a.Msg)), 36); case 'Msg_SendGift':c = _FormatStr.SendGiftMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', a.PostUID = ReplaceKeys_UID(a.PostUID), f = $.format(c, a.PostUID, GB2312UnicodeConverter.ToGB2312(unescape(a.PostUName)), a.PostPower, unescape(unescape(a.PostRoleTitle)), a.RoleStyle, a.ZberStyle, a.RoomRoleStyle, unescape(unescape(a.RoomRoleTitle)), a.ReceiveUID, GB2312UnicodeConverter.ToGB2312(unescape(unescape(a.ReceiveUName))), a.ReceivePower, unescape(unescape(a.ReceiveRoleTitle)), a.Receive_RoleStyle, a.Receive_ZberStyle, unescape(a.Receive_RoomRoleTitle), a.Receive_RoomRoleStyle, a.PostPower >= 1e3 ? 'RoomManager' : '', a.ReceivePower >= 1e3 ? 'RoomManager' : '', a.Gift_Icon, a.Gift_Pic, a.Gift_Num, a.Gift_Price); break; case 'Manage_Kick':if (a.ReceiveUID == iInfo.UserID) return $.cookie('Kick_' + iRoomID, GetNewTime(60), {path: '/', expires: 365}), void (location.href = '/Error.shtml?' + escape('您被管理员踢出 1 小时，截止到' + $.cookie('Kick_' + iRoomID))); if (_SysConfig.ShowManageMsg == 0 && (a.ReceiveUID != iInfo.UserID || a.PostUID != iInfo.UserID)) return; c = _FormatStr.KickMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, unescape(unescape(a.PostUName)), unescape(unescape(a.ReceiveUName)), GetSendTime()); break; case 'Manage_BlackKick':if (a.ReceiveUID == iInfo.UserID) return void $.get('/handle/SetBlackKick.asp', {ac: 'SetBlackKick', rid: iRoomID, t: GetSendTime()}, function () { location.href = '/Error.shtml?' + escape('您被管理员踢出并列入黑名单，解封请联系管理人员。') }); if (_SysConfig.ShowManageMsg == 0 && (a.ReceiveUID != iInfo.UserID || a.PostUID != iInfo.UserID)) return; c = _FormatStr.BlackKickMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, unescape(unescape(a.PostUName)), unescape(unescape(a.ReceiveUName)), GetSendTime()); break; case 'Manage_Silent':if (a.ReceiveUID == iInfo.UserID && $.cookie('Silent_' + iRoomID, GetNewTime(5), {path: '/', expires: 365}), _SysConfig.ShowManageMsg == 0 && (a.ReceiveUID != iInfo.UserID || a.PostUID != iInfo.UserID)) return; c = _FormatStr.SilentMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, unescape(a.PostUName), unescape(a.ReceiveUName), GetSendTime()); break; case 'Manage_UnSilent':if (a.ReceiveUID == iInfo.UserID && $.cookie('Silent_' + iRoomID, GetNewTime(0), {path: '/', expires: 365}), _SysConfig.ShowManageMsg == 0 && (a.ReceiveUID != iInfo.UserID || a.PostUID != iInfo.UserID)) return; c = _FormatStr.UnSilentMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, unescape(a.PostUName), unescape(a.ReceiveUName), GetSendTime()); break; case 'Manage_Manager':if (_SysConfig.ShowManageMsg == 0 && (a.ReceiveUID != iInfo.UserID || a.PostUID != iInfo.UserID)) return; c = _FormatStr.ManagerMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, unescape(a.PostUName), unescape(a.ReceiveUName), GetSendTime()); break; case 'Manage_UnManager':if (_SysConfig.ShowManageMsg == 0 && (a.ReceiveUID != iInfo.UserID || a.PostUID != iInfo.UserID)) return; c = _FormatStr.UnManagerMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, unescape(a.PostUName), unescape(a.ReceiveUName), GetSendTime()); break; case 'Manage_SetRoomUserRole':SetRoomUserRole(a); break; case 'Menu_Black':c = _FormatStr.BlackMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, unescape(a.ReceiveUName), GetSendTime()); break; case 'Menu_UnBlack':c = _FormatStr.UnBlackMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', f = $.format(c, unescape(a.ReceiveUName), GetSendTime()); break; case 'Msg_Del':return void $('#M_' + a.MD5).remove(); case 'CMD_SendRedBag':AddRegBagNum(), c = _FormatStr.RedBad, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', a.PostUID = ReplaceKeys_UID(a.PostUID), f = $.format(c, a.PostUID, GB2312UnicodeConverter.ToGB2312(unescape(a.PostUName)), a.ReceiveUID, GB2312UnicodeConverter.ToGB2312(unescape(a.ReceiveUName)), a.Msg, a.Time, a.MD5, a.Checked, a.PostPower, a.ReceivePower, a.RoleStyle, a.ZberStyle, a.RoomRoleStyle, unescape(unescape(a.RoomRoleTitle)), a.Receive_RoleStyle, a.Receive_ZberStyle, a.Receive_RoomRoleStyle, unescape(a.Receive_RoomRoleTitle), a.PostPower >= 1e3 ? 'RoomManager' : '', a.ReceivePower >= 1e3 ? 'RoomManager' : '', unescape(unescape(a.PostRoleTitle)), unescape(unescape(a.ReceiveRoleTitle))); break; case 'CMD_SharePic_Add':return void AddSharePic(a); case 'CMD_SharePic_Del':return void DelSharePic(a); case 'CMD_Shouted_Update':return void AjaxSetShouted(); case 'CMD_ViewPoint_Add':AddViewPoint(a), c = _FormatStr.PublicMsg_ViewPoint, a.Msg = unescape(a.Msg), a.Msg = ReplaceKeys(a.Msg), a.Msg = ReplaceMsgToFace(a.Msg), a.Msg = ReplaceUploadPic(a.Msg), a.PostUID = ReplaceKeys_UID(a.PostUID), g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PriMes_Div', f = $.format(c, a.PostUID, unescape(a.PostUName), a.ReceiveUID, unescape(a.ReceiveUName), unescape(a.Msg), a.Time, a.MD5, a.Checked, a.PostPower, a.ReceivePower, a.RoleStyle, a.ZberStyle, a.RoomRoleStyle, unescape(a.RoomRoleTitle), a.Receive_RoleStyle, a.Receive_ZberStyle, a.Receive_RoomRoleStyle, unescape(a.Receive_RoomRoleTitle), a.PostPower >= 1e3 ? 'RoomManager' : '', a.ReceivePower >= 1e3 ? 'RoomManager' : '', unescape(unescape(a.PostRoleTitle)), unescape(unescape(a.ReceiveRoleTitle))); break; case 'CMD_ViewPoint_Del':return void DelViewPoint(a); case 'CMD_MsgCheckMode_Change':return void MsgCheckMode_Change(a); case 'CMD_RollOut':return void setTimeout(function () { location.href = '/' + a.RollOutRoomID }, 1e3); case 'CMD_LiveCast':return void LiveCast_Do(a.LiveCastRoomID); case 'CMD_LiveCast_End':return void LiveCast_End(); case 'CMD_LiveCast_YY':return void LiveCast_Do_YY(a.YYID); case 'CMD_LiveCast_End_YY':return void LiveCast_End_YY(); case 'CMD_LiveCast_Other':return void LiveCast_Do_Other(a.RID, a.SN, a.Msg, a.Watch); case 'CMD_LiveCast_End_Other':return void LiveCast_End_Other(); case 'CMD_CurrentLive':return SetCurrentLiveUID(a), _Config.Room_LiveWapUrl = a.WapPubName, void (ibrowser.mobile == 1 && $('#i_Live_Player').attr('t') != 'pub' && _Dis_Live(0)); case 'CMD_LiveMessageUpdate':return void LiveMessage_getrecord(1); case 'CMD_Position':return void Position_Do(a); case 'CMD_VoteUpdate':return void Vote_Do(a); case 'CMD_Vote_Start':return void Start_Vote(); case 'CMD_Vote_Stop':return void Stop_Vote(); case 'CMD_GetQQ':return void (a.ReceiveUID == iInfo.UserID && GetQQ(a)); case 'CMD_GetQQ_CallBack':return void (a.ReceiveUID == iInfo.UserID && GetQQ_CallBack(a)); case 'CMD_PrivateApply':return void (a.ReceiveUID == iInfo.UserID && Show_PrivateApply(a)); case 'CMD_PrivateApply_True':if (a.ReceiveUID == iInfo.UserID) { var j = {}; j.Type = 'Sys_Private', j.ReceiveRID = iRoomID, j.PostUID = a.PostUID, j.PostUID = ReplaceKeys_UID(j.PostUID), j.PostUName = a.PostUName, j.Msg = "<a uname='" + j.PostUName + "' uid='" + j.PostUID + "' class='u' href='javascript://' onclick='LinkLayerClick(this)'>" + j.PostUName + ' </a> 已经成为您的专属用户。', ReceiveInfo(j) } return; case 'CMD_PrivateApply_False':if (a.ReceiveUID == iInfo.UserID) { var j = {}; j.Type = 'Sys_Private', j.ReceiveRID = iRoomID, j.PostUID = a.PostUID, j.PostUID = ReplaceKeys_UID(j.PostUID), j.PostUName = a.PostUName, j.Msg = "<a uname='" + j.PostUName + "' uid='" + j.PostUID + "' class='u' href='javascript://' onclick='LinkLayerClick(this)'>" + j.PostUName + ' </a> 拒绝了您的专属请求。', ReceiveInfo(j) } return; case 'CMD_Quotation':return void UpdateQuotation(a); case 'QuickReply_Msg':c = _FormatStr.QuickReplyMsg, g = _Config.PublicMsgMaxNum, h = _Config.Pub_isScroll, d = '#Y_PubMes_Div', a.Msg = unescape(unescape(a.Msg)), a.Msg = ReplaceMsgToFace(a.Msg), a.Msg = ReplaceUploadPic(a.Msg), a.PostUName = unescape(a.PostUName), f = $.format(c, unescape(a.PostUName), a.Msg, GetSendTime(), unescape(a.RoleID))
    }e = $(d); var k = e.find('ul'); if (h && k[0].childNodes.length > g) for (i = 0; i < k[0].childNodes.length - g; i++)k[0].removeChild(k[0].firstChild); k.append(f), e.mCustomScrollbar('update'), h ? e.mCustomScrollbar('scrollTo', 'bottom') : '', Init_MsgSharePic()
  }, 10)
} function CheckMsg_True (a, b) { iInfo.IsManager || (location.href = '/Fail.shtml?' + escape('非法请求')), $(b).hide(); var c = {}; c = _CheckMsgList[a], c.ReceiveRID = iInfo.Live_NG_ID, c.Checked = !0, c.IsDBMsg = !1, c.MD5 = a, PostMsg(c), $.get('/Handle/UpdateChatMsg.asp', {ac: 'UpdateChatMsg', rid: iRoomID, MD5: c.MD5}, function () {}, 'script') } function DelMsg (a) { iInfo.IsManager || (location.href = '/Fail.shtml?' + escape('非法请求')), $('#M_' + a).remove(); var b = {}; b.Type = 'Msg_Del', b.ReceiveRID = iInfo.Live_NG_ID, b.MD5 = a, PostMsg(b), $.get('/Handle/UpdateChatMsg.asp', {ac: 'DelChatMsg', rid: iRoomID, MD5: a}, function () {}, 'script') } function MsgCheckMode_Change (a) { a.Mode == 2 ? _SysConfig.CheckMsg = _SysConfig.GlobalCheckMsg : _SysConfig.CheckMsg = a.Mode } function MsgScrollToBottom () { _Config.Pub_isScroll ? $('#Y_PubMes_Div').mCustomScrollbar('scrollTo', 'bottom') : '' } function ManyWindowError () { iTip('您同一房间打开了过多窗口！当前页面自动跳转到首页！', null, 3e4), location.href = '/' } function DisLive () { var a = (getDataTimes(), '11.1.0'), b = '/swf/playerProductInstall.swf', c = {}, d = {}; d.quality = 'high', d.wmode = 'transparent'; var e = navigator.userAgent; (e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/) || e.indexOf('Android') > -1 || e.indexOf('Linux') > -1) && (d.wmode = 'Window'), d.bgcolor = '#000000', d.allowscriptaccess = 'sameDomain', d.allowfullscreen = 'true'; var f = {}; f.id = _Config.PlayerID, f.name = _Config.PlayerID, f.align = 'middle'; var g = ''; RoomConfig.RtmpUrl && (g = g + '&RtmpUrl=' + RoomConfig.RtmpUrl), RoomConfig.MsgUrl && (g = g + '&MsgUrl=' + RoomConfig.MsgUrl), RoomConfig.Rate != 0 && (g = g + '&Rate=' + RoomConfig.Rate), swfobject.embedSWF('/swf/Sound.swf?RoomID=' + iRoomID + g, _Config.BindPlayerID, '250', '205', a, b, c, d, f) } function DisBell () { var a = (getDataTimes(), '11.1.0'), b = '/swf/playerProductInstall.swf', c = {}, d = {}; d.quality = 'high', d.wmode = 'transparent'; var e = navigator.userAgent; (e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/) || e.indexOf('Android') > -1 || e.indexOf('Linux') > -1) && (d.wmode = 'Window'), d.bgcolor = '#000000', d.allowscriptaccess = 'sameDomain', d.allowfullscreen = 'true'; var f = {}; f.id = _Config.BellPlayerID, f.name = _Config.BellPlayerID, f.align = 'middle'; swfobject.embedSWF('/swf/Bell.swf', _Config.BindBellPlayerID, '1', '1', a, b, c, d, f) } function GetChatMsg (pageindex) { $.get('/Handle/GetChatMsg.asp', {ac: 'GetChatMsg', page: pageindex, Roomid: iRoomID, t: getDataTimes}, function (json) { var dataObj = eval('(' + json + ')'); $.each(dataObj.data, function (a, b) { ReceiveInfo(b) }) }, 'script') } function GetOnlineUsers () { $.get('/Handle/GetRoomOnlineUser.asp', {ac: 'GetRoomOnlineUser', RID: iRoomID, t: getDataTimes}, function (a) { FixMsgInfo('UL_Cache', a) }) } var _Player, _iFlyMsgPlayer, _MicIsOpen = !1, _CheckMsgList = {}, UserListArr = [], CustomerListArr = [], _FormatStr = {}; _FormatStr.UserList = '<li id="{0}" rid="{7}" uname="{1}" LevelID="{6}" Power="{9}" RoleID="{14}" RoleStyle="{12}" RoleTitle="{13}" ZberStyle="{18}" RoomRoleStyle="{16}" RoomRoleTitle="{17}" CustomerType="{19}" style="display:{20}"><div class="UBase" onmouseover="UBase_Over(this)" onmouseout="UBase_Out(this)" onclick="UBase_Click(this)"><img class="USoundStatus" src="/images/pixel.gif"><img class="US_Pic" src="{8}"><img class="USPicShadow" src="/images/pixel.gif"><img class="Role {12}" title="{13}" src="/images/pixel.gif"><img class="RM {15}" title="房管" src="/images/pixel.gif"><img class="RB {18}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {16}" title="{17}" src="/images/pixel.gif"><span title="{1}" class="UName" href="javascript:void(0)">{1}</span><span class="ULabel">（{0}）</span></div><div class="UShowPannel"><div class="US_List Shadow"><a class="US_List_Home" target="_blank" href="/Profile/?{0}">主页</a><a class="US_List_AddFriend" href="javascript:void(0)" onclick="AddFriend(this)">好友</a><a class="US_List_Heart" href="javascript:void(0)" onclick="Attention(this)">关注</a><a class="US_List_Black" href="javascript:void(0)" onclick="Menu_Black({0},\'{1}\')">屏蔽</a><a class="ManageLink" href="javascript:void(0)" onmouseover="ManageLink_Over(this)" onmouseout="ManageLink_Out(this)"><span class="US_List_Down" >操作</span></a></div></div></li>', _FormatStr.Guest = '<li id="{0}" rid="{7}" uname="{1}" LevelID="{6}" Power="0" RoleID="0" CustomerType="{19}" style="display:{20}"><div class="UBase" onmouseover="UBase_Over(this)" onmouseout="UBase_Out(this)" onclick="UBase_Click(this)"><img class="USoundStatus" src="/images/pixel.gif"><img class="US_Pic" src="{8}"><img class="USPicShadow" src="/images/pixel.gif"><img class="RoomUserRole {16}" title="{17}" src="/images/pixel.gif"><img class="UPower UP0" src="/images/pixel.gif"><a class="UName" href="javascript:void(0)">{1}</a></div><div class="UShowPannel"><div class="US_List Shadow"><a class="US_List_Home" href="javascript:void(0)">主页</a><a class="US_List_AddFriend" href="javascript:void(0)">好友</a><a class="US_List_Heart" href="javascript:void(0)">关注</a><a class="US_List_Black" href="javascript:void(0)" onclick="Menu_Black({0},\'{1}\')">屏蔽</a><a class="ManageLink" href="javascript:void(0)" onmouseover="ManageLink_Over(this)" onmouseout="ManageLink_Out(this)"><span class="US_List_Down" >操作</span></a></div></div></li>', _FormatStr.MicList = '<li id="M{0}" rid="{7}" uname="{1}" class="t"><img class="USoundStatus" src="/images/pixel.gif"><img class="UPower" src="/images/pixel.gif"><a class="UName" href="javascript:void(0)">{1}</a><a class="DelMic" href="javascript:void(0)" onclick="DelMicList({0})" title="删除此用户麦序">删麦序</a></li>', _FormatStr.PublicMsg = '<li class="" id="M_{6}" MID="{20}"><span class="t">{5} </span><img class="Role {10}" src="/images/pixel.gif" title="{21}"><img class="RM {18}" title="房管" src="/images/pixel.gif"><img class="RB {11}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {12}" title="{13}" src="/images/pixel.gif"><a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{0}" uname="{1}" power="{8}" RoleStyle="{10}" ZberStyle="{11}" RoomRoleStyle="{12}" RoomRoleTitle="{13}">{1} ：</a><span class="m {18} {11}">{4}</span></li>', _FormatStr.PublicMsg_ViewPoint = '<li class="" id="M_{6}"><span class="t">{5} </span><span class="Head_ViewPoint" onclick="ShowViewPointZoom()">观点</span><img class="Role {10}" src="/images/pixel.gif" title="{20}"><img class="RM {18}" title="房管" src="/images/pixel.gif"><img class="RB {11}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {12}" title="{13}" src="/images/pixel.gif"><a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{0}" uname="{1}" power="{8}" RoleStyle="{10}" ZberStyle="{11}" RoomRoleStyle="{12}" RoomRoleTitle="{13}">{1} ：</a><span class="m">{4}</span></li>', _FormatStr.PublicMsg_Check = '<li class="" id="M_{6}" MID="{20}"><span class="t">{5} </span><img class="Role {10}" src="/images/pixel.gif" title="{21}"><img class="RM {18}" title="房管" src="/images/pixel.gif"><img class="RB {11}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {12}" title="{13}" src="/images/pixel.gif"><a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{0}" uname="{1}" power="{8}" RoleStyle="{10}" ZberStyle="{11}" RoomRoleStyle="{12}" RoomRoleTitle="{13}">{1} ：</a><span class="m {18} {11}">{4}</span><a class="check" href="javascript:void(0)" onclick="CheckMsg_True(\'{6}\',this)" id="{6}">审核通过</a><a class="del" href="javascript:void(0)" onclick="DelMsg(\'{6}\')">删</a></li>', _FormatStr.PublicMsg_ToPerson = '<li class="" id="M_{6}" MID="{20}"><span class="t">{5} </span><img class="Role {10}" src="/images/pixel.gif" title="{21}"><img class="RM {18}" title="房管" src="/images/pixel.gif"><img class="RB {11}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {12}" title="{13}" src="/images/pixel.gif"><a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{0}" uname="{1}" power="{8}" RoleStyle="{10}" ZberStyle="{11}" RoomRoleStyle="{12}" RoomRoleTitle="{13}">{1} </a> <span class="m noclear">对</span><img class="Role {14}" src="/images/pixel.gif" title="{22}"><img class="RM {19}" title="房管" src="/images/pixel.gif"><img class="RB {15}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {16}" title="{17}" src="/images/pixel.gif"> <a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{2}" uname="{3}" power="{9}" RoleStyle="{14}" ZberStyle="{15}" RoomRoleStyle="{16}" RoomRoleTitle="{17}">{3}  ：</a><span class="m {18} {11}">{4}</span></li>', _FormatStr.PublicMsg_ToPerson_Check = '<li class="" id="M_{6}" MID="{20}"><span class="t">{5} </span><img class="Role {10}" src="/images/pixel.gif" title="{21}"><img class="RM {18}" title="房管" src="/images/pixel.gif"><img class="RB {11}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {12}" title="{13}" src="/images/pixel.gif"><a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{0}" uname="{1}" power="{8}" RoleStyle="{10}" ZberStyle="{11}" RoomRoleStyle="{12}" RoomRoleTitle="{13}">{1} </a> <span class="m noclear">对</span><img class="Role {14}" src="/images/pixel.gif" title="{22}"><img class="RM {19}" title="房管" src="/images/pixel.gif"><img class="RB {15}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {16}" title="{17}" src="/images/pixel.gif"> <a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{2}" uname="{3}" power="{9}" RoleStyle="{14}" ZberStyle="{15}" RoomRoleStyle="{16}" RoomRoleTitle="{17}">{3}  ：</a><span class="m {18} {11}">{4}</span><a class="check" href="javascript:void(0)" onclick="CheckMsg_True(\'{6}\',this)" id="{6}">审核通过</a><a class="del" href="javascript:void(0)" onclick="DelMsg(\'{6}\')">删</a></li>', _FormatStr.PrivateMsg_ToPerson = '<li class=""><span class="t">{5} </span><img class="Role {10}" src="/images/pixel.gif"><img class="RM {18}" title="房管" src="/images/pixel.gif"><img class="RB {11}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {12}" title="{13}" src="/images/pixel.gif"><a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{0}" uname="{1}" power="{6}" RoleStyle="{10}" ZberStyle="{11}" RoomRoleStyle="{12}" RoomRoleTitle="{13}">{1} </a> <span class="m noclear">对</span><img class="Role {14}" src="/images/pixel.gif"><img class="RM {19}" title="房管" src="/images/pixel.gif"><img class="RB {15}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {16}" title="{17}" src="/images/pixel.gif"> <a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{2}" uname="{3}" power="{7}" RoleStyle="{14}" ZberStyle="{15}" RoomRoleStyle="{16}" RoomRoleTitle="{17}">{3}  ：</a><span class="m {18} {11}">{4}</span></li>', _FormatStr.SysMsg = '<li class="notice"><span class="t">{1}</span><span class="sys">系统消息 ： {0}</span></li>', _FormatStr.EnterMsg = '<li class="notice"><span class="t">{2}</span><span class="gary">系统消息 ： <b class="black"><a onclick="LinkLayerClick(this)" href="javascript://" class="ub" uid="{0}" uname="{1}" power="{9}">{1}</a></b> 进入了房间。</span></li>', _FormatStr.KickMsg = '<li class="notice"><span class="t">{2}</span><span class="gary">系统消息 ： 管理员 <b class="black">{0}</b> 将 <b class="black">{1}</b> 踢出了房间。</span></li>', _FormatStr.BlackKickMsg = '<li class="notice"><span class="t">{2}</span><span class="gary">系统消息 ： 管理员 <b class="black">{0}</b> 将 <b class="black">{1}</b> 踢出了房间。</span></li>', _FormatStr.SilentMsg = '<li class="notice"><span class="t">{2}</span><span class="gary">系统消息 ： <b class="black">{1}</b> 被 管理员 <b class="black">{0}</b> 禁言5分钟。</span></li>', _FormatStr.UnSilentMsg = '<li class="notice"><span class="t">{2}</span><span class="gary">系统消息 ： 管理员 <b class="black">{0}</b> 恢复 <b class="black">{1}</b> 的发言。</span></li>', _FormatStr.ManagerMsg = '<li class="notice"><span class="t">{2}</span><span class="gary">系统消息 ： <b class="black">{1}</b> 被 <b class="black">{0}</b> 设置为管理员。</span></li>', _FormatStr.UnManagerMsg = '<li class="notice"><span class="t">{2}</span><span class="gary">系统消息 ： <b class="black">{1}</b> 被 <b class="black">{0}</b> 撤销管理员身份。</span></li>', _FormatStr.BlackMsg = '<li class="notice"><span class="t">{1}</span><span class="gary">系统消息 ： 已屏蔽 <b class="black">{0}</b> 的聊天信息 。</span></li>', _FormatStr.UnBlackMsg = '<li class="notice"><span class="t">{1}</span><span class="gary">系统消息 ： 已解除 <b class="black">{0}</b> 的信息屏蔽。</span></li>', _FormatStr.MsgSharePic = '<span class="pic"><a href="javascript:void(0)" title="双击放大" ondblclick="MsgPic_LargeZoom(this)" class="cursorDefault"><img src="' + _Config.DynamicFileServer + '/UserUpload/MsgPic/{0}" onerror="javascript:this.src=\'/images/noPic.jpg\';" onload="MsgScrollToBottom()"></a><div class="{1}"><a href="javascript:void(0)" t="' + _Config.DynamicFileServer + '/UserUpload/MsgPic/{0}" onclick="Set_SharePic(this)" class="share">分享到贴图</a></div><a class="LargeZoom" rel="MsgSharePic" href="' + _Config.DynamicFileServer + '/UserUpload/MsgPic/{0}" title="放大">放大</a></span>', _FormatStr.MsgShareListPic = '<div id="SharePic{3}" class="picZoom"><a class="pic" href="{1}" title="" rel="sharepic"><img src="{1}"/><div class="mask"><div class="title">{0}</div><div class="date">{2}</div></div></a><span title="删除" onclick="SharePic_Del({3})" class="SharePic_Del">删除</span></div>', _FormatStr.FaceArry = ['赞', 'up', 'kiss', '来电', '贱笑', '陶醉', '兴奋', '鄙视', '得意', '偷笑', '挖鼻孔', '衰', '流汗', '伤心', '鬼脸', '狂笑', '发呆', '害羞', '可怜', '气愤', '惊吓', '困了', '再见', '感动', '晕', '可爱', '潜水', '强', '囧', '窃笑', '疑问', '装逼', '抱歉', '鼻血', '睡觉', '委屈', '笑哈哈', '贱贱地笑', '被电', '转发', '求关注', '路过这儿', '好激动', '招财', '加油啦', '转转', '围观', '推撞', '来嘛', '啦啦啦', '切克闹', '给力', '威武', '流血'], _FormatStr.GuestUserCard = '<div class="Card_Base"><div class="Base_Left"><img src="/images/DefaultFace.png"></div><div class="Base_Right"><div class="Base_NickName"><img src="/images/pixel.gif" class="Base_Sex Female"/>{0}</div><div class="Base_Area"></div><span class="Card_CloseBt" onclick="User_Crad_Close()">关闭</span></div></div><div class="Card_Detail"><div class="Detail_List On"><a href="#" onclick="javascript:void(0)"><span>0</span><div class="clr5"></div><span class="Detail_Label">订阅</span></a></div><div class="Detail_List" style="width:34%;"><a href="#" onclick="javascript:void(0)"><span>0</span><div class="clr5"></div><span class="Detail_Label">跟单</span></a></div><div class="Detail_List"><a href="#" onclick="javascript:void(0)"><span>0</span><div class="clr5"></div><span class="Detail_Label">喊单</span></a></div></div>', _FormatStr.PopBox = '<div title="" class="PopBox_Title">{0}</div><div class="PopBox_Content"><div class="PopBox_Content_List"><ul></ul></div></div>', _FormatStr.RedBad = '<li class="" id="M_{6}"><span class="t">{5} </span><img class="Role {10}" title="{20}" src="/images/pixel.gif"><img class="RM {18}" title="房管" src="/images/pixel.gif"><img class="RB {11}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {12}" title="{13}" src="/images/pixel.gif"><a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="{0}" uname="{1}" power="{8}" RoleStyle="{10}" ZberStyle="{11}" RoomRoleStyle="{12}" RoomRoleTitle="{13}">{1} ：</a><span class="m">赠送1个红包<em class="redbag"></em></span></li>', _FormatStr.PrivatePopUL = '<li uid="{0}" id="PrivatePopUL_{0}" uname="{1}" power="{2}" rolestyle="{3}" roletitle="{4}" roomrolestyle="{5}" roomroletitle="{6}" zberstyle="{7}" class="" ><img src="{8}"><a class="uname" href="javascript:void(0)">{1}</a><a class="PrivatePopUserClose" href="javascript:void(0)">关闭</a><span class="UserMsgNum show" style="display: none;">0</span></li>', _FormatStr.PrivatePopMsgList = '<div class="PrivatePopUIDMsgList" id="PrivatePop_MsgList_{0}" style="display: none;"><ul></ul></div>', _FormatStr.SendGiftMsg = '<li><span class="t">09:23 </span><img class="Role {4}" src="/images/pixel.gif" title="{3}"><img class="RM {16}" title="房管" src="/images/pixel.gif"><img class="RB {5}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {6}" title="{7}" src="/images/pixel.gif"><a roomroletitle="{7}" roomrolestyle="{6}" zberstyle="{5}" rolestyle="{4}" power="{2}" uname="{1}" uid="{0}" class="u" href="javascript://" onclick="LinkLayerClick(this)">{1}</a><span class="m">赠送</span><img class="Role {12}" src="/images/pixel.gif" title="{11}"><img class="RM {17}" title="房管" src="/images/pixel.gif"><img class="RB {13}" title="主播" src="/images/pixel.gif"><img class="RoomUserRole {15}" title="{14}" src="/images/pixel.gif"><a class="u" roomroletitle="{14}" roomrolestyle="{15}" zberstyle="{13}" rolestyle="{12}" power="{10}" uname="{9}" uid="{8}" href="javascript://" onclick="LinkLayerClick(this)">{9} </a><span class="m sendgift"><em>{20}个</em><img src="{19}"></span></li>', _FormatStr.QuickReplyMsg = '<li class="" id="M_7000" MID="7000"><span class="t">{2} </span><img class="Role {3}" src="/images/pixel.gif" title=""><img class="RM " title="房管" src="/images/pixel.gif"><img class="RB " title="主播" src="/images/pixel.gif"><img class="RoomUserRole " title="" src="/images/pixel.gif"><a onclick="LinkLayerClick(this)" href="javascript://" class="u" uid="7000" uname="{0}" power="1" RoleStyle="" ZberStyle="" RoomRoleStyle="RoomUser4" RoomRoleTitle="自言">{0} ：</a><span class="m ">{1}</span></li>'; var IsFirstLoad = !0, GetMoreUL_Index = 1, MicTimeSetTimeOut = 0, MicActivityTime = 0, FaceTemplateStr = '<img align="absmiddle" src="/cssimg/face/{0}.gif">'; $(function () { $('#ModelButton .Button').text($('#ModelButtonList_' + _Config.ModeType + ' a').text()), $.cookie('Kick_' + iRoomID) && (new Date()).format('yyyy-MM-dd hh:mm:ss').localeCompare($.cookie('Kick_' + iRoomID)) == -1 && (location.href = '/Kick.html?您被管理员踢出 1 小时，截止到' + $.cookie('Kick_' + iRoomID)), EnterRoom(iInfo), GetOnlineUsers(), GetChatMsg(1) })
